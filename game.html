if (betweenWaves) {
        ctx.fillStyle = 'rgba(0, 0, 0, 0.5)';
        ctx.fillRect(0, 0, canvas.width, canvas.height);
        ctx.fillStyle = 'white';
        ctx.font = '30px Arial';
        ctx.fillText(`Wave ${level - 1}`, canvas.width / 2 - 75, canvas.height / 2);

        if (Date.now() - waveTimer >= 3000) { // Wait for 3 seconds before spawning
            betweenWaves = false;
            if (level % 10 === 0) {
                spawnBoss(); // Spawn boss every 10th wave
            } else {
                // Spawn the required number of enemies
                for (let i = 0; i < enemiesToSpawn; i++) {
                    spawnEnemy(); // This will now only happen once when the wave transition is complete
                }
            }
        }
    }
